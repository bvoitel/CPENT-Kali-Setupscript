#!/bin/bash
echo "#############################################"
echo "#         Kali Pentest Setup Script         #"
echo "#  - installs various tools and scripts     #"
echo "#############################################"
cd /root
apt-get -y update && apt-get -y upgrade
apt-get -y install dirsearch docker.io python3-impacket python3-pip python3-venv seclists curl enum4linux feroxbuster impacket-scripts nbtscan nikto nmap onesixtyone oscanner redis-tools smbclient smbmap snmp sslscan sipvicious tnscmd10g whatweb wkhtmltopdf bloodhound zenmap-kbx checksec gdb
python3 -m pip install --user pipx
python3 -m pipx ensurepath
python3 -m pipx install git+https://github.com/Tib3rius/AutoRecon.git
cd /usr/share/wordlists
gunzip rockyou.txt.gz
mkdir /root/tools
echo "#!/bin/bash" > /root/simpleHTTPServer.sh
echo "cd /root/tools" >> /root/simpleHTTPServer.sh
echo "python3 -m http.server 80 --directory /root/tools" >> /root/simpleHTTPServer.sh
chmod u+x /root/simpleHTTPServer.sh
cp /usr/share/doc/python3-impacket/examples/smbserver.py /root
echo "#!/bin/bash" > /root/smbserver.sh
echo "python3 smbserver.py tools /root/tools" >> /root/smbserver.sh
chmod u+x /root/smbserver.sh
mkdir /root/git
cd /root/git
git clone https://github.com/61106960/adPEAS
git clone https://github.com/carlospolop/PEASS-ng
#cp ./PEASS-ng/linPEAS/linpeas.sh /root/tools
curl -L https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh > /root/tools/linpeas.sh
cp ./PEASS-ng/winPEAS/winPEASexe/binaries/x86/Release/winPEASx86.exe /root/tools
cp ./PEASS-ng/winPEAS/winPEASexe/binaries/x64/Release/winPEASx64.exe /root/tools
cp ./PEASS-ng/winPEAS/winPEASbat/winPEAS.bat /root/tools
git clone https://github.com/r3motecontrol/Ghostpack-CompiledBinaries
cp ./Ghostpack-CompiledBinaries/*.exe /root/tools
git clone https://github.com/TarlogicSecurity/kerbrute
git clone https://github.com/ropnop/kerbrute
git clone https://github.com/3gstudent/pyKerbrute
git clone https://github.com/diego-treitos/linux-smart-enumeration
cp ./linux-smart-enumeration/lse.sh /root/tools # Local PE Enumaration (Linux)
gem install evil-winrm
git clone https://github.com/rezasp/joomscan.git  # Scanner for Joomla CMS
git clone https://github.com/D35m0nd142/LFISuite  # Local File Inclusion Exploitation
git clone https://github.com/capture0x/LFI-FINDER # Local File Inclusion Detector
git clone https://github.com/ParrotSec/mimikatz
git clone https://github.com/mertdas/PrivKit # Windows PE vulnerabilities detector
git clone https://github.com/cddmp/enum4linux-ng  # SMB / Domain Enumaration Script
git clone https://github.com/anouarbensaad/vulnx  # CMS Detector
git clone https://github.com/blackhatethicalhacking/Nucleimonst3r.git # Webscanner for Bug Bounty Hunters
git clone https://github.com/stanislav-web/OpenDoor # Multifunctional website scanner
pip install one-lin3r # Reverse Shell Oneliners
git clone https://github.com/AzeemIdrisi/PhoneSploit-Pro.git # Android Phone Exploitation via ADB with Metasploit
git clone https://github.com/AonCyberLabs/Windows-Exploit-Suggester
git clone https://github.com/liamg/traitor # Automatic Linux Local PE exploiter
git clone https://github.com/HacktivistRO/ExtFilterBuster # File Upload Restriction Bypass
git clone https://github.com/kgretzky/evilginx2 # Man-in-the-Middle Attack Framework
git clone https://github.com/rebootuser/LinEnum # Linux Local PE script
cp ./LinEnum/LinEnum.sh /root/tools
wget https://raw.githubusercontent.com/mzet-/linux-exploit-suggester/master/linux-exploit-suggester.sh -O /root/tools/linux-exploit-suggester.sh
git clone https://github.com/SecWiki/windows-kernel-exploits # Precompiled Windows Kernel Exploits
git clone https://github.com/longld/peda.git ~/peda
git clone https://github.com/scipag/vulscan scipag_vulscan
ln -s `pwd`/scipag_vulscan /usr/share/nmap/scripts/vulscan
git clone https://github.com/lefayjey/linWinPwn # Automatic AD enumeration and exploitation
git clone https://github.com/Octoberfest7/TeamsPhisher # Phishing tool to attack MS Teams
cd linWinPwn
chmod u+x install.sh
./install.sh
cd ..
echo "source ~/peda/peda.py" >> ~/.gdbinit
wget https://github.com/ropnop/kerbrute/releases/download/v1.0.3/kerbrute_linux_386 -o /root/tools/kerbrute_linux_386
wget https://github.com/ropnop/kerbrute/releases/download/v1.0.3/kerbrute_linux_amd64 -o /root/tools/kerbrute_linux_amd64
wget https://github.com/ropnop/kerbrute/releases/download/v1.0.3/kerbrute_windows_386.exe -o /root/tools/kerbrute_windows_386
wget https://github.com/ropnop/kerbrute/releases/download/v1.0.3/kerbrute_windows_amd64.exe -o /root/tools/kerbrute_windows_amd64
pip install --upgrade ropgadget
updatedb
echo "#############################################"
echo "#                     DONE!                 #"
echo "#  Things to do:                            #"
echo "#  You may want to install OpenVAS docker:  #"
echo "#  docker run --detach --publish 9392:9392  #"
echo "#    --publish 5432:5432                    #"
echo "#    --env DB_PASSWORD="<PASSWD>"           #"
echo "#    --env PASSWORD="<PASSWD>"              #"
echo "#    --name GVM securecompliance/gvm        #"
echo "#  docker start GVM                         #"
echo "#  - http://localhost:9392 (OpenVAS)        #"
echo "#                                           #"
echo "#  - change default password for bloodhound #"
echo "#############################################"
